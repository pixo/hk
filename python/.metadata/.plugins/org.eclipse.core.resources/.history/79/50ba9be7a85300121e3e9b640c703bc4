#!/usr/bin/env python

import couchdb
import argparse
    
def lsShots(db,projectName):
    startkey = u"project_%s_" % projectName
    endkey = u"project_%s_\u0fff" % projectName
    view = db.view("_design/%s/_view/shotsByProjectAndbname" % db.name, startkey=startkey, endkey=endkey)
    for row in view.rows:
        print row["value"]["name"]
    
if __name__ == '__main__':#terminal
    dbname="db1"
    user="admin:admin"
    server = couchdb.Server("http://%s@127.0.0.1:5984" % user)
    
    if dbname in server:
        db = server[dbname]
        parser = argparse.ArgumentParser()
        parser.add_argument("project" ,help="name of the project to create")
        args = parser.parse_args()
        
        startkey = u"project_%s_" % args.project
        endkey = u"project_%s_\u0fff" % args.project
        view = db.view("_design/%s/_view/shotsByProjectAndbname" % dbname, startkey=startkey, endkey=endkey)
        for row in view.rows:
            print row["value"]["name"]


