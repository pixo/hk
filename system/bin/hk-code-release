#!/bin/bash

if [ $1=="-d" ]
	then
		args="--delete"
fi

if [ -a "$HK_USER_CODE_PATH" -a -a "$HK_CODE_PATH" ]
	then
		#Exclude file 
		pyc="--exclude=*.pyc"
		eclipse="--exclude=*.project --exclude=*.metadata"
		pydev="--exclude=*.pydevproject"
		sys="--exclude=*~ --exclude=*.md --exclude=*.rachid --exclude=*.git"
		couchapp="--exclude=*couchapp"
		exclude_args="$pyc $eclipse $pydev $sys $couchapp"

		#sync
		rsync --progress -rvuh $args $exclude_args $HK_USER_CODE_PATH/* $HK_CODE_PATH
	else
		echo "hk-code-release: You should be log into a project. Use hk-project command to login"
fi